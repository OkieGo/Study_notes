![img](images/git-command.jpg)

标识自己的名称，邮箱

```git
git congfig --global user.name "Okie"
git config --global user.email "666@qq.com"
```

### 创建仓库命令

下表列出了 git 创建仓库的命令：

| 命令          | 说明                                   |
| :------------ | :------------------------------------- |
| `git init`  | 初始化仓库                             |
| `git clone` | 拷贝一份远程仓库，也就是下载一个项目。 |

**创建ssh key:**

打开git bash，输入

```
ssh-keygen -t ed25519 -C "your_email@example.com"
```

提示输入秘钥名字和密码，为了方便起见，我这里选择不填

<pre><sider-code-explain id="sider-code-explain" data-gpts-theme="light"><div class="chat-gpt-quick-query-container"><div class="sider-code-explain-button-wrapper-common"><button class="sider-code-explain-button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M5.68295 2C6.70532 2 7.54943 2.78898 7.67665 3.8101L7.67665 4H5.80113C5.75613 4 5.71253 4.01612 5.67779 4.04561L4.8942 4.71084C4.83578 4.6825 4.77053 4.66667 4.70169 4.66667C4.45167 4.66667 4.24898 4.8756 4.24898 5.13333C4.24898 5.39107 4.45167 5.6 4.70169 5.6C4.95172 5.6 5.1544 5.39107 5.1544 5.13333C5.1544 5.09411 5.14971 5.05602 5.14087 5.01962L5.87066 4.4H7.67665V7.8L4.0114 7.80002C3.93875 7.64234 3.78285 7.53333 3.60225 7.53333C3.35223 7.53333 3.14954 7.74227 3.14954 8C3.14954 8.25773 3.35223 8.46667 3.60225 8.46667C3.78283 8.46667 3.93871 8.35769 4.01137 8.20005L7.67665 8.2V11.6H5.87066L5.14087 10.9804C5.14971 10.944 5.1544 10.9059 5.1544 10.8667C5.1544 10.6089 4.95172 10.4 4.70169 10.4C4.45167 10.4 4.24898 10.6089 4.24898 10.8667C4.24898 11.1244 4.45167 11.3333 4.70169 11.3333C4.77053 11.3333 4.83578 11.3175 4.8942 11.2892L5.67779 11.9544C5.71253 11.9839 5.75613 12 5.80113 12H7.67665L7.67665 12.19C7.53504 13.2133 6.67959 14 5.65053 14C4.702 14 3.90447 13.3316 3.67452 12.4257C2.98645 12.1157 2.50543 11.4064 2.50543 10.581C2.50543 10.3864 2.53217 10.1982 2.58209 10.0202C1.9669 9.68964 1.54411 9.02923 1.53294 8.26565L1.53271 8.2C1.53271 7.36486 2.02928 6.64928 2.73466 6.34987C2.60485 6.10439 2.5248 5.82672 2.50852 5.53139L2.50673 5.49159C2.50413 5.4503 2.50281 5.40864 2.50281 5.36667C2.50281 4.53921 3.01594 3.8353 3.73207 3.57461C3.94984 2.6702 4.74069 2 5.68295 2Z" fill="currentColor"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M12.2734 3.59773C12.0636 2.68163 11.2673 2 10.3171 2C9.29472 2 8.45061 2.78898 8.32338 3.8101V12.19C8.46499 13.2133 9.32044 14 10.3495 14C11.298 14 12.0956 13.3316 12.3255 12.4257C13.0136 12.1157 13.4946 11.4064 13.4946 10.581C13.4946 10.3864 13.4679 10.1982 13.4179 10.0202C14.0415 9.68517 14.4673 9.01132 14.4673 8.23464C14.4673 7.53577 14.1225 6.92015 13.5992 6.55985C13.5968 6.59869 13.5834 6.63721 13.5585 6.67023C13.1689 7.18747 12.7286 7.51297 12.2439 7.64614C12.235 7.67034 12.2262 7.69666 12.2179 7.72495C12.1766 7.86578 12.1552 8.02272 12.1631 8.19103C12.1697 8.33136 12.1967 8.47381 12.2473 8.6176C12.284 8.72199 12.2319 8.83738 12.1309 8.87534C12.03 8.9133 11.9184 8.85944 11.8816 8.75506C11.8175 8.57273 11.7829 8.39053 11.7745 8.21058C11.7662 8.03442 11.7829 7.86786 11.8182 7.71364C11.3286 7.73647 10.7996 7.58187 10.2368 7.24953C10.1435 7.19444 10.1111 7.07159 10.1644 6.97514C10.2177 6.87869 10.3365 6.84517 10.4298 6.90026L10.4643 6.9204C11.6 7.57618 12.5085 7.36099 13.2541 6.3709C13.4073 6.08954 13.4946 5.76481 13.4946 5.41899C13.4946 4.58509 12.9867 3.87382 12.2734 3.59773ZM9.29072 10.3742C9.25083 10.2711 9.29938 10.1541 9.39914 10.1128C9.49534 10.0731 9.60404 10.1183 9.64745 10.2141L9.65199 10.2249L9.66035 10.2429C9.67743 10.2779 9.70278 10.3199 9.73685 10.3641C9.79288 10.4367 9.86143 10.5 9.94329 10.5484C10.1435 10.6666 10.4046 10.6877 10.7488 10.5692C11.031 10.3804 11.3822 10.2904 11.7985 10.3029C11.9058 10.3061 11.9904 10.3987 11.9873 10.5097C11.9842 10.6207 11.8946 10.7081 11.7872 10.7049C11.0216 10.6821 10.5702 11.0581 10.3872 11.8781C10.3631 11.9863 10.2586 12.0538 10.154 12.0288C10.0493 12.0039 9.98396 11.8959 10.0081 11.7877C10.0721 11.501 10.1677 11.2546 10.2939 11.0496C10.0914 11.0445 9.90988 10.9919 9.75026 10.8976C9.5263 10.7653 9.3829 10.5793 9.30197 10.4007L9.30013 10.3966L9.29072 10.3742ZM10.1774 3.87702C10.07 3.87963 9.98496 3.97176 9.98748 4.0828C9.99567 4.44343 10.0709 4.75308 10.211 5.00946C9.87934 5.0337 9.55545 5.21444 9.26077 5.5776C9.19172 5.6627 9.20247 5.78956 9.28479 5.86094C9.36711 5.93232 9.48981 5.92121 9.55886 5.83611C9.79929 5.5398 10.0381 5.41437 10.2729 5.40904C10.3671 5.40691 10.4574 5.42463 10.5416 5.45708C10.5929 5.47681 10.6355 5.49935 10.6676 5.52025L10.6837 5.53124L10.6937 5.53857C10.6981 5.54159 10.7026 5.54441 10.7072 5.54694C10.9276 5.69287 11.1976 5.79553 11.5155 5.8534C11.6213 5.87267 11.7222 5.79961 11.7408 5.69022C11.7595 5.58082 11.6888 5.47653 11.583 5.45726C11.3135 5.4082 11.0909 5.3252 10.9135 5.2066L10.8962 5.19416L10.8763 5.18076C10.5506 4.94521 10.388 4.58 10.3765 4.07336C10.3739 3.96232 10.2848 3.87441 10.1774 3.87702Z" fill="currentColor"></path></svg>解释</button></div></div></sider-code-explain><code class="language-text">PS C:\Users\xxxx\Desktop\Git> ssh-keygen
Generating public/private rsa key pair.
Enter file in which to save the key (C:\Users\xxxx/.ssh/id_rsa): 
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in C:\Users\xxxx/.ssh/id_rsa.
Your public key has been saved in C:\Users\xxxx/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:PQqtJLnXe3WyERS/faU9DQgN8NU6cfZJwHUROfzm5j0 xxxx@xxxxxxxx
The key's randomart image is:
+---[RSA 3072]----+
|        ..oo++++=|
|         . o+++=.|
Receiving objects: 100% (6/6), done.</code></pre>

可以看到秘钥生成在 `C:\Users\xxxx/.ssh/`这个地方，文件名为 `id_rsa.pub`

将其放入自己github账户的sshkey中

### 提交与修改

Git 的工作就是创建和保存你的项目的快照及与之后的快照进行对比。

下表列出了有关创建与提交你的项目的快照的命令：

| 命令                                  | 说明                                     |
| :------------------------------------ | :--------------------------------------- |
| `git add`                           | 添加文件到暂存区                         |
| `git status`                        | 查看仓库当前的状态，显示有变更的文件。   |
| `git diff`                          | 比较文件的不同，即暂存区和工作区的差异。 |
| `git commit`                        | 提交暂存区到本地仓库。                   |
| `git reset`                         | 回退版本。                               |
| `git rm`                            | 将文件从暂存区和工作区中删除。           |
| `git mv`                            | 移动或重命名工作区文件。                 |
| `git checkout`                      | 分支切换。                               |
| `git switch （Git 2.23 版本引入）`  | 更清晰地切换分支。                       |
| `git restore （Git 2.23 版本引入）` | 恢复或撤销文件的更改。                   |

**add:**

```
git add file1.txt file2.java
git add .  //添加所有修改的文件到暂存区
```

**commit:**

```
git commit -m "备注信息"
git commit -a 			 //可以省略git add
git commit -am "备注信息" //提交流程不繁琐
```

**reset:**

```
git reset --soft "版本"   //仅仅移动版本库HEAD指针，工作区不变，暂存区也不变
git reset --mixed “版本”  //mixed为默认，可以省略。移动HEAD指针，暂存区重置，本地文件不变。
git reset --hard "版本"   //移动HEAD指针，暂存区重置，工作区的文件变为指定版本的。

git reset "版本" file.txt  (不建议使用！)
```

![img](images/827261-20190930185415960-1026615781.png)

> 回退单个文件：
>
> - git reset（回退暂存区的指定文件，工作区不变）(建议少用，多用restore)
>
> ```git
> git reset <commit_id> <file_path>
> ```
>
> 然后执行git status，会发现工作区没变化！暂存区有变化，提示需要进行git add和git commit，原因是git reset作用于文件时，只会修改暂存区。（版本库肯定无法修改，因为只回退了一个文件，其他的文件并没有回退，所以整个版本不能回退）
>
> - checkout
>
> ```
> git checkout "版本" -- file.txt //工作区和暂存区都会更新(建议少用，多用restore)
> ```
>
> - `restore(建议使用的方式)`
>
> ```
> git restore file.txt //回滚到最新版本
> git restore --source=版本 file.txt //回退到指定版本
> ```

**checkout:**`(checkout完全可以被restore和switch替代)`

```
git checkout <branch-name>  	  //切换分支
git checkout - 					  //切换到回前一个分支
git checkout -b <new-branch-name> //创建新分支并切换
```

```
git checkout "版本" -- file.txt   //恢复暂存区和工作区的文件到指定版本

git checkout tags/<tag-name> 
```

**restore:**

```
git restore file.txt                //回滚到当前暂存区中的版本
git restore --source=版本 file.txt  //回退到指定版本
git restore --staged file.txt      //撤销暂存区的文件
git restore -s 版本 -SW file.txt   //-s指定版本，-S表示--staged，-W表示--worktree
```

**switch:**

```
git switch 分支名     //切换分支
git switch -c 分支名  //创建新分支并切换
git switch -         //切换到回前一个分支
git branch           //查看可用分支和标签
```

**branch:**

```
git branch  //列出分支
git branch 分支名 //创建分支
git branch -d 分支名  //删除分支
git branch -b 分支名  //创建并切换分支
```

**tag:**

```
git tag //查看标签
git tag 标签名 版本  为某个版本创建标签
git tag -d 标签名  //删除标签
```

### 远程操作

| 命令           | 说明               |
| :------------- | :----------------- |
| `git remote` | 远程仓库操作       |
| `git fetch`  | 从远程获取代码库   |
| `git pull`   | 下载远程代码并合并 |
| `git push`   | 上传远程代码并合并 |

**remote:**

- `git remote`：列出当前仓库中已配置的远程仓库。
- `git remote -v`：列出当前仓库中已配置的远程仓库，并显示它们的 URL。
- `git remote add <remote_name> <remote_url>`：添加一个新的远程仓库。指定一个远程仓库的名称和 URL，将其添加到当前仓库中。
- `git remote rename <old_name> <new_name>`：将已配置的远程仓库重命名。
- `git remote remove <remote_name>`：从当前仓库中删除指定的远程仓库。
- `git remote set-url <remote_name> <new_url>`：修改指定远程仓库的 URL。
- `git remote show <remote_name>`：显示指定远程仓库的详细信息，包括 URL 和跟踪分支。

**fetch:**

- `git fetch [remote]`：获取服务器所有变动

**pull:**

- `git pull [remote] [branch]`：获取远程仓库跟踪分支的变动，并合并到当前分支
- `git pull origin master:brantest`：将远程主机 origin 的 master 分支拉取过来，与本地的 brantest 分支合并。

**push:**

- `git push <远程主机名> <本地分支名>:<远程分支名>`：推送本地分支到远程分支（当前分支不能落后于远程分支，否则推送失败）
- `git push <远程主机名> <本地分支名>`：如果本地分支名与远程分支名相同，则可以省略冒号
- `git push -u <远程主机名> <本地分支名>`：-u表示跟踪远程分支，git pull时默认拉取跟踪的分支
- `git push [remote] --all`：推送所有分支到远程仓库
